<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FraudGuard AI - Standalone Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            background-color: #020617;
            color: #f8fafc;
            font-family: sans-serif;
        }
    </style>
</head>

<body class="min-h-screen p-6 md:p-12">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="mb-10 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="p-3 bg-indigo-500 rounded-xl shadow-lg shadow-indigo-500/20">
                    <i data-lucide="shield-check" class="w-8 h-8 text-white"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-bold tracking-tight text-white">FraudGuard AI</h1>
                    <p class="text-slate-400">Real-time Financial Anomaly Detection (Standalone Demo)</p>
                </div>
            </div>
            <div class="text-right">
                <div
                    class="inline-flex items-center px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-sm font-medium animate-pulse">
                    ‚óè System Operational
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-slate-900 border border-slate-800 p-6 rounded-xl shadow-lg">
                <p class="text-slate-400 text-sm font-medium uppercase">Total Transactions</p>
                <h3 id="stat-total" class="text-2xl font-bold mt-2 text-white">0</h3>
            </div>
            <div class="bg-slate-900 border border-slate-800 p-6 rounded-xl shadow-lg">
                <p class="text-slate-400 text-sm font-medium uppercase">Fraud Detected</p>
                <h3 id="stat-fraud" class="text-2xl font-bold mt-2 text-white">0</h3>
            </div>
            <div class="bg-slate-900 border border-slate-800 p-6 rounded-xl shadow-lg">
                <p class="text-slate-400 text-sm font-medium uppercase">Legit Transactions</p>
                <h3 id="stat-legit" class="text-2xl font-bold mt-2 text-white">0</h3>
            </div>
            <div class="bg-slate-900 border border-slate-800 p-6 rounded-xl shadow-lg">
                <p class="text-slate-400 text-sm font-medium uppercase">Fraud Rate</p>
                <h3 id="stat-rate" class="text-2xl font-bold mt-2 text-white">0.00%</h3>
            </div>
        </div>

        <!-- Controls -->
        <div class="bg-slate-900 border border-slate-800 p-4 rounded-xl shadow-lg flex items-center gap-4 mb-6">
            <div class="flex-1">
                <h3 class="text-white font-semibold">Simulation Control</h3>
                <p class="text-slate-400 text-sm">Manage the synthetic transaction stream.</p>
            </div>
            <div class="flex gap-2">
                <button id="btn-start" onclick="startSim()"
                    class="flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-medium transition-all">
                    <i data-lucide="play" class="w-4 h-4"></i> Start Stream
                </button>
                <button id="btn-stop" onclick="stopSim()"
                    class="hidden flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-all">
                    <i data-lucide="square" class="w-4 h-4"></i> Stop Stream
                </button>
                <button onclick="injectFraud()"
                    class="flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-medium transition-all">
                    <i data-lucide="zap" class="w-4 h-4"></i> Inject Fraud Effect
                </button>
            </div>
        </div>

        <!-- Feed -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div
                    class="bg-slate-900 border border-slate-800 rounded-xl shadow-lg overflow-hidden flex flex-col h-[500px]">
                    <div class="p-4 border-b border-slate-800 bg-slate-900/50">
                        <h2 className="text-lg font-semibold text-white">Live Transaction Stream</h2>
                    </div>
                    <div class="overflow-y-auto flex-1 p-0">
                        <table class="w-full text-left border-collapse">
                            <thead
                                class="bg-slate-950 sticky top-0 z-10 text-xs uppercase text-slate-400 font-semibold">
                                <tr>
                                    <th class="p-4">Status</th>
                                    <th class="p-4">ID</th>
                                    <th class="p-4">Amount</th>
                                    <th class="p-4">Location</th>
                                    <th class="p-4">Time</th>
                                </tr>
                            </thead>
                            <tbody id="tx-table-body" class="divide-y divide-slate-800/50">
                                <!-- Rows will be injected here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6">
                <h3 class="text-lg font-semibold text-white mb-4">Model Logic (Simulated)</h3>
                <div class="space-y-4">
                    <div class="bg-slate-800/50 p-4 rounded-lg">
                        <p class="text-sm text-slate-300">This standalone demo uses JavaScript to simulate the Python
                            backend.</p>
                        <ul class="mt-4 space-y-2 text-sm text-slate-400 list-disc list-inside">
                            <li>Generating random global payments</li>
                            <li>Evaluating against threshold rules</li>
                            <li>Simulating network latency</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Icons
        lucide.createIcons();

        // State
        let stats = { total: 0, fraud: 0 };
        let isRunning = false;
        let intervalId = null;
        const customers = Array.from({ length: 100 }, (_, i) => `CUST_${i}`);
        const countries = ["US", "UK", "DE", "FR", "IN", "JP", "CN", "BR", "AU", "CA"];
        const currencies = ["USD", "GBP", "EUR", "INR", "JPY", "CNY", "BRL", "AUD", "CAD"];

        function updateStats() {
            document.getElementById('stat-total').innerText = stats.total;
            document.getElementById('stat-fraud').innerText = stats.fraud;
            document.getElementById('stat-legit').innerText = stats.total - stats.fraud;
            const rate = stats.total > 0 ? ((stats.fraud / stats.total) * 100).toFixed(2) : "0.00";
            document.getElementById('stat-rate').innerText = rate + "%";
        }

        function addRow(tx) {
            const tbody = document.getElementById('tx-table-body');
            const row = document.createElement('tr');
            row.className = `transition-colors hover:bg-slate-800/30 ${tx.is_fraud ? 'bg-red-900/10' : ''}`;

            const amountClass = tx.is_fraud ? 'text-red-400' : 'text-slate-200';
            const badge = tx.is_fraud
                ? '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-500/10 text-red-400 border border-red-500/20">FRAUD</span>'
                : '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-500/10 text-emerald-400 border border-emerald-500/20">LEGIT</span>';

            row.innerHTML = `
                <td class="p-4">${badge}</td>
                <td class="p-4 font-mono text-xs text-slate-500 truncate max-w-[100px]">${tx.id.split('-')[0]}...</td>
                <td class="p-4 font-bold ${amountClass}">${tx.currency} ${tx.amount.toLocaleString(undefined, { minimumFractionDigits: 2 })}</td>
                <td class="p-4 text-slate-300">${tx.location}</td>
                <td class="p-4 text-slate-400 text-sm">${new Date().toLocaleTimeString()}</td>
            `;

            tbody.insertBefore(row, tbody.firstChild);
            if (tbody.children.length > 50) tbody.removeChild(tbody.lastChild);
        }

        function generateTransaction(forceFraud = false) {
            const is_fraud = forceFraud || Math.random() < 0.05;

            let amount, country, currency;

            if (is_fraud) {
                amount = Math.random() * 45000 + 5000; // 5k - 50k
                country = countries[Math.floor(Math.random() * countries.length)];
                currency = currencies[Math.floor(Math.random() * currencies.length)];
            } else {
                amount = Math.random() * 990 + 10; // 10 - 1000
                country = Math.random() > 0.3 ? "US" : countries[Math.floor(Math.random() * countries.length)];
                currency = country === "US" ? "USD" : currencies[Math.floor(Math.random() * currencies.length)];
            }

            const tx = {
                id: crypto.randomUUID(),
                amount: amount,
                currency: currency,
                location: country,
                is_fraud: is_fraud
            };

            // Update stats
            stats.total++;
            if (is_fraud) stats.fraud++;

            updateStats();
            addRow(tx);
        }

        function startSim() {
            if (isRunning) return;
            isRunning = true;
            document.getElementById('btn-start').classList.add('hidden');
            document.getElementById('btn-stop').classList.remove('hidden');

            intervalId = setInterval(() => {
                generateTransaction();
            }, 1500);
        }

        function stopSim() {
            isRunning = false;
            clearInterval(intervalId);
            document.getElementById('btn-start').classList.remove('hidden');
            document.getElementById('btn-stop').classList.add('hidden');
        }

        function injectFraud() {
            generateTransaction(true);
        }
    </script>
</body>

</html>